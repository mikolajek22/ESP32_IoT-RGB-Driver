<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
        <title>RGB Driver</title>

        <style>
            body {
                margin: 0;
                padding: 0;
                height: 100vh;
                display: flex;
                flex-direction: column;
            }
            #header {
                background-color: #3a3a3a;
                width: 100%;
                height: 10%;
                display: flex;
                align-items: center;
            }
            #header_title {
                margin-left: 5%;
                font-family: Verdana, Geneva, Tahoma, sans-serif;
                color: rgb(255, 75, 180);
                font-size: 5vw;
                text-shadow: 
                    2px 2px 0 white, 
                    -2px 2px 0 white, 
                    2px -2px 0 white, 
                    -2px -2px 0 white, 
                    2px 0 0 white, 
                    -2px 0 0 white, 
                    0 2px 0 white, 
                    0 -2px 0 white;
            }
            #container {
                display: flex;
                flex-grow: 1;
                height: 80%;
            }
            #nav {
                background-color: #afafaf;
                width: 10%;
                height: 100%;
                box-shadow:
                    2px 2px 0 black, 
                    -2px 2px 0 black, 
                    2px -2px 0 black, 
                    -2px -2px 0 black, 
                    2px 0 0 black, 
                    -2px 0 0 black, 
                    0 2px 0 black, 
                    0 -2px 0 black;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            #nav_text {
                text-align: center;
                font-size: 1vw;
                text-shadow: 
                    1px 1px 0 white, 
                    -1px 1px 0 white, 
                    1px -1px 0 white, 
                    -1px -1px 0 white, 
                    1px 0 0 white, 
                    -1px 0 0 white, 
                    0 1px 0 white, 
                    0 -1px 0 white;
            }
            #content {
                background-color: #d4d4d4;
                width: 90%;
                height: 100%;
                box-shadow: 
                    2px 2px 0 black, 
                    -2px 2px 0 black, 
                    2px -2px 0 black, 
                    -2px -2px 0 black, 
                    2px 0 0 black, 
                    -2px 0 0 black, 
                    0 2px 0 black, 
                    0 -2px 0 black;
                display: flex;
                flex-direction: column;
                /* align-items: center; */
                /* justify-content: center; */
                overflow: auto;
            }
            .color-picker-container {
            display: flex;
            align-items: center;
            }
            input[type="color"] {
                border: none;
                width: 80vh; /* Zwiększ szerokość */
                height: 20vh; /* Zwiększ wysokość */
                cursor: pointer;
            }
            .button-row {
            margin-bottom: 20px;
            }
            .button-row button {
                margin-left: 10px;
                box-shadow:
                        2px 2px 0 black, 
                        -2px 2px 0 black, 
                        2px -2px 0 black, 
                        -2px -2px 0 black, 
                        2px 0 0 black, 
                        -2px 0 0 black, 
                        0 2px 0 black, 
                        0 -2px 0 black;
                width: 200px;
                height: 100px;
            }
            .text-row {
                display: flex;
                gap: 10px; /* Odstęp między elementami */;
            }
            .text-row h3 {
                margin-left: 10px;
                width: 100px;
                height: 10px;
            }
            input {
            width: 50px;
            padding: 5px;
            margin-left: 10px;
        }

        </style>
    </head>
    <body>
        <div id="header">
            <h1 id="header_title">RGB Driver</h1>
        </div>
        <div id="container">
            <div id="nav">
                <i class="fa fa-solid fa-house-user", style="font-size: 3vw; color: rgb(255, 75, 180); 
                    text-shadow: 
                        2px 2px 0 black, 
                        -2px 2px 0 black, 
                        2px -2px 0 black, 
                        -2px -2px 0 black, 
                        2px 0 0 black, 
                        -2px 0 0 black, 
                        0 2px 0 black, 
                        0 -2px 0 black;
                    display: flex;
                    margin-top: 50px;", onclick="changePage('main')">
                </i>
                <h2 id="nav_text">
                    HOME
                </h2>

                <i class="fa fa-solid fa-gear", style="font-size: 3vw; color: rgb(255, 75, 180); text-shadow: 2px 2px 0 black, 
                    -2px 2px 0 black, 
                    2px -2px 0 black, 
                    -2px -2px 0 black, 
                    2px 0 0 black, 
                    -2px 0 0 black, 
                    0 2px 0 black, 
                    0 -2px 0 black;
                    display: flex;
                    margin-top: 50px;", onclick="changePage('config')">
                </i>
                <h2 id="nav_text">
                    CONFIGURATION
                </h2>
                
                <i class="fa fa-solid fa-lightbulb", style="font-size: 3vw; color: rgb(255, 75, 180); text-shadow: 2px 2px 0 black, 
                    -2px 2px 0 black, 
                    2px -2px 0 black, 
                    -2px -2px 0 black, 
                    2px 0 0 black, 
                    -2px 0 0 black, 
                    0 2px 0 black, 
                    0 -2px 0 black; display: flex;
                    margin-top: 50px;", onclick="changePage('control')">
                </i>
                <h2 id="nav_text">
                    RGB<br>CONTROLLER
                </h2>

                <i class="fa fa-solid fa-terminal", style="font-size: 3vw; color: rgb(255, 75, 180); text-shadow: 2px 2px 0 black, 
                    -2px 2px 0 black, 
                    2px -2px 0 black, 
                    -2px -2px 0 black, 
                    2px 0 0 black, 
                    -2px 0 0 black, 
                    0 2px 0 black, 
                    0 -2px 0 black; display: flex;
                    margin-top: 50px;", onclick="changePage('logs')">
                </i>
                <h2 id="nav_text">
                    LOGS
                </h2>
            </div>
            <div id="content">
                <h2 style="margin-left: 10px;">CHOOSE COLOR:</h2> 
                <div class="color-picker-container">
                    <input type="color" id="colorPicker" value="#000000" onchange="sendColor(this.value)">

                </div>
                <h2 style="margin-left: 10px;">BASIC COLORS:</h2> 
                <div class="button-row">
                    <button id="off" style="background-color: #000000; color: #FFFFFF; font-size: 26px;" onclick="sendColor('#000000')">OFF</button>
                    <button id="white" style="background-color: #FFFFFF; font-size: 26px;" onclick="sendColor('#FFFFFF')">WHITE</button>
                </div>
                <div class="button-row">
                    <button id="red" style="background-color: #FF0000; font-size: 26px;" onclick="sendColor('#FF0000')">RED</button>
                    <button id="green" style="background-color: #00FF00; font-size: 26px;" onclick="sendColor('#00FF00')">GREEN</button>
                    <button id="blue" style="background-color: #0000FF; font-size: 26px;" onclick="sendColor('#0000FF')">BLUE</button>
                </div>
                <h2 style="margin-left: 10px;">SEQUENCES:</h2>
                <div class="button-row">
                    <button id="seq_1" style="background-color: #00ffd5; font-size: 26px;" onclick="sendSeq('1')">SEQUENCE 1</button>
                    <button id="seq_2" style="background-color: #00ffd5; font-size: 26px;" onclick="sendSeq('2')">SEQUENCE 2</button>
                    <button id="seq_3" style="background-color: #00ffd5; font-size: 26px;" onclick="sendSeq('3')">SEQUENCE 3</button>
                    <button id="seq_4" style="background-color: #00ffd5; font-size: 26px;" onclick="sendSeq('4')">SEQUENCE 3</button>
                </div>
                <h2 style="margin-left: 10px;">ORIGINAL SEQUENCES:</h2>
                <div class="text-row">
                    <h3 style="margin-left: 10px;">FROM</h3>
                    <h3 style="margin-left: 10px;">THROUGH</h3>
                    <h3 style="margin-left: 20px;">TO</h3>
                </div>
                <div class="text-row">
                    <input id="R1" type="number" min="0" max="255" placeholder="R" >
                    <input id="R2" type="number" min="0" max="255" placeholder="R" style="margin-left: 50px;">
                    <input id="R3" type="number" min="0" max="255" placeholder="R" style="margin-left: 55px;">
                </div>
                <div class="text-row">
                    <input id="G1" type="number" min="0" max="255" placeholder="G" >
                    <input id="G2" type="number" min="0" max="255" placeholder="G" style="margin-left: 50px;">
                    <input id="G3" type="number" min="0" max="255" placeholder="G" style="margin-left: 55px;">
                </div>
                <div class="text-row">
                    <input id="B1" type="number" min="0" max="255" placeholder="B" >
                    <input id="B2" type="number" min="0" max="255" placeholder="B" style="margin-left: 50px;">
                    <input id="B3" type="number" min="0" max="255" placeholder="B" style="margin-left: 55px;">
                </div>
                <h3 style="margin-left: 10px;">PERIOD TIME</h3>
                <div style="display: inline; margin-left: 10px;">
                    time<input id="time" type="number" min="0" max="255" placeholder="ms" style="margin-right: 10px;">ms
                    <button id="apply" style="background-color: #00ffd5; font-size: 26px; height: 40px; width: 200px; margin-left: 20px;" onclick="sendOriginal()">APPLY</button>
                </div>
                <br>
                
            </div>
        </div>

        <script>
            function changePage(page) {
                switch(page) {
                    case 'main': window.location.href = '/get?page=main'; break;
                    case 'config': window.location.href = '/get?page=config'; break;
                    case 'control': window.location.href = '/get?page=control'; break;
                    case 'logs': window.location.href = '/get?page=logs'; break;
                }
            }

            window.onload = () => {
            };

            function sendColor(color) {
                const red = parseInt(color.slice(1, 3), 16);
                const green = parseInt(color.slice(3, 5), 16);
                const blue = parseInt(color.slice(5, 7), 16);
                fetch('/RGB', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        rgbValues:{
                            red,
                            green,
                            blue 
                        }
                    })
                })
                .then(Response=>{
                    if (Response.ok){
                        changeDisplay(10);
                    }
                    else{
                        changeDisplay(-1);
                    }
                })
            }

            function sendSeq(sequence) {
                const number = parseInt(sequence)
                fetch('/RGB_sequence', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        sequence:{
                            number
                        }
                    })
                })
                .then(Response=>{
                    if (Response.ok){
                        changeDisplay(number);
                    }
                    else{
                        changeDisplay(-1);
                    }
                })
            }
            function sendOriginal() {
                const R1 = parseInt(document.getElementById('R1').value) || 0;
                const R2 = parseInt(document.getElementById('R2').value) || 0;
                const R3 = parseInt(document.getElementById('R2').value) || 0;

                const G1 = parseInt(document.getElementById('G1').value) || 0;
                const G2 = parseInt(document.getElementById('G2').value) || 0;
                const G3 = parseInt(document.getElementById('G3').value) || 0;

                const B1 = parseInt(document.getElementById('B1').value) || 0;
                const B2 = parseInt(document.getElementById('B2').value) || 0;
                const B3 = parseInt(document.getElementById('B3').value) || 0;

                const time = parseInt(document.getElementById('time')) || 1000;
                fetch('/RGB_original', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        sequence:{
                            first:{
                                red: R1,
                                reen: G1,
                                blue: B1
                            },
                            second:{
                                red: R2,
                                reen: G2,
                                blue: B2
                            },
                            third:{
                                red: R3,
                                reen: G3,
                                blue: B3
                            },
                            time:{
                                period:time
                            }
                        }
                    })
                })
                .then(Response=>{
                    if (Response.ok){
                        changeDisplay(5);
                    }
                    else{
                        changeDisplay(-1);
                    }
                })
            }
            function changeDisplay(btn){
                if (btn == 1) {
                    document.getElementById("seq_1").style.backgroundColor="#0f5246";
                    document.getElementById("seq_2").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_3").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_4").style.backgroundColor="#00ffd5";
                    document.getElementById("apply").style.backgroundColor="#00ffd5";
                }
                else if(btn == 2){
                    document.getElementById("seq_1").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_2").style.backgroundColor="#0f5246";
                    document.getElementById("seq_3").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_4").style.backgroundColor="#00ffd5";
                    document.getElementById("apply").style.backgroundColor="#00ffd5";
                }
                else if(btn == 3){
                    document.getElementById("seq_1").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_2").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_3").style.backgroundColor="#0f5246";
                    document.getElementById("seq_4").style.backgroundColor="#00ffd5";
                    document.getElementById("apply").style.backgroundColor="#00ffd5";
                }
                else if(btn == 4){
                    document.getElementById("seq_1").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_2").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_3").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_4").style.backgroundColor="#0f5246";
                    document.getElementById("apply").style.backgroundColor="#00ffd5";
                }   
                else if(btn == 5){
                    document.getElementById("seq_1").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_2").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_3").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_4").style.backgroundColor="#00ffd5";
                    document.getElementById("apply").style.backgroundColor="#0f5246";
                }
                else{
                    document.getElementById("seq_1").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_2").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_3").style.backgroundColor="#00ffd5";
                    document.getElementById("seq_4").style.backgroundColor="#00ffd5";
                    document.getElementById("apply").style.backgroundColor="#00ffd5";
                }
            }
        </script>
    </body>
</html>
